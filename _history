{"entries":[{"timestamp":1728932285492,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[-1,"s"],[0,"://"],[-1,"developers.google.com/blockly/xml\"><variables></variables>"],[1,"www.w3.org/1999/xhtml\">\n  "],[0,"<blo"]],"start1":12,"start2":12,"length1":70,"length2":37},{"diffs":[[0,"art\""],[-1," x=\"20\" y=\"20\""],[0,"></b"]],"start1":67,"start2":67,"length1":22,"length2":8},{"diffs":[[0,"</block>"],[1,"\n  "],[0,"<block t"]],"start1":72,"start2":72,"length1":16,"length2":19},{"diffs":[[0,"ver\""],[-1," x=\"225\" y=\"20\""],[0,"></b"]],"start1":107,"start2":107,"length1":23,"length2":8},{"diffs":[[0,"</block>"],[1,"\n"],[0,"</xml>"]],"start1":112,"start2":112,"length1":14,"length2":15}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"basic.forever(function () {\n\t\n})"],[0,"\n"]],"start1":0,"start2":0,"length1":33,"length2":1}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"   \""],[-1,"preferredEditor\": \"blocksprj\""],[1,"additionalFilePaths\": []"],[0,"\n}\n"]],"start1":235,"start2":235,"length1":36,"length2":31}]}]},{"timestamp":1728932293181,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," \"*\""],[-1,",\n        \"neopixel\": \"github:microsoft/pxt-neopixel#v0.7.6\""],[0,"\n   "]],"start1":138,"start2":138,"length1":68,"length2":8}]}]},{"timestamp":1728940079266,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[1,"2"],[0,"0\" y=\""],[1,"2"],[0,"0\"><"]],"start1":104,"start2":104,"length1":14,"length2":16},{"diffs":[[0,"x=\"2"],[-1,"0"],[1,"2"],[0,"5\" y=\""],[1,"2"],[0,"0\"><"]],"start1":156,"start2":156,"length1":15,"length2":16}]}]},{"timestamp":1728940081434,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":310,"start2":310,"length1":17,"length2":21}]}]},{"timestamp":1728941133224,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,".md\""],[-1,",\n        \"main.py\""],[0,"\n   "]],"start1":282,"start2":282,"length1":27,"length2":8}]},{"type":"added","filename":"main.py","value":""}]},{"timestamp":1728941136314,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":329,"start2":329,"length1":21,"length2":17}]},{"type":"edited","filename":"main.py","patch":[{"diffs":[[-1,"def on_forever():\n    pass\nbasic.forever(on_forever)\n"]],"start1":0,"start2":0,"length1":53,"length2":0}]}]},{"timestamp":1728941833297,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"py"],[1,"blocks"],[0,"prj\"\n}\n"]],"start1":329,"start2":329,"length1":17,"length2":21}]}]},{"timestamp":1728941833413,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"let np = neopixel.create(DigitalPin.P0, 64, NeoPixelMode.RGB)\nlet matrix: number[][] = []\nlet tetriminos: { [key: string]: number[][] } = {\n    I: [[1, 1, 1, 1]],\n    O: [[1, 1], [1, 1]],\n    T: [[0, 1, 0], [1, 1, 1]],\n    L: [[1, 0], [1, 0], [1, 1]],\n    Z: [[1, 1, 0], [0, 1, 1]]\n}\nlet colors: { [key: string]: number } = {\n    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié \"Cyan\" por \"Blue\"\n    O: neopixel.colors(NeoPixelColors.Yellow),\n    T: neopixel.colors(NeoPixelColors.Purple),\n    L: neopixel.colors(NeoPixelColors.Orange),\n    Z: neopixel.colors(NeoPixelColors.Red)\n}\n\nlet current_piece: string | null = null\nlet current_position: number[] = [0, 0]\n\n// Inicializa la matriz vacía (8x8)\nfor (let y = 0; y < 8; y++) {\n    let row: number[] = []\n    for (let x = 0; x < 8; x++) {\n        row.push(0)\n    }\n    matrix.push(row)\n}\n\n// Función para limpiar la pantalla\nfunction clear_screen(): void {\n    np.clear()\n    np.show()\n}\n\n// Actualiza la pantalla con la matriz del juego\nfunction update_screen(): void {\n    clear_screen()\n    for (let y = 0; y < 8; y++) {\n        for (let x = 0; x < 8; x++) {\n            if (matrix[y][x] === 1) {\n                np.setPixelColor(y * 8 + x, neopixel.colors(NeoPixelColors.White))\n            }\n        }\n    }\n    np.show()\n}\n\n// Dibuja la pieza actual en la posición especificada\nfunction draw_piece(piece: number[][], position: number[]): void {\n    for (let y = 0; y < piece.length; y++) {\n        for (let x = 0; x < piece[y].length; x++) {\n            if (piece[y][x] === 1) {\n                np.setPixelColor((position[0] + y) * 8 + (position[1] + x), colors[current_piece!])\n            }\n        }\n    }\n    np.show()\n}\n\n// Mueve la pieza hacia abajo\nfunction move_down(): void {\n    current_position[0] += 1\n}\n\n// Genera una nueva pieza aleatoria\nfunction generate_new_piece(): void {\n    let keys = Object.keys(tetriminos)\n    current_piece = keys[Math.randomRange(0, keys.length - 1)]\n    current_position = [0, 3]\n    draw_piece(tetriminos[current_piece], current_position)\n}\n\n// Verifica si la pieza puede moverse a una nueva posición\nfunction can_move(piece: number[][], position: number[]): boolean {\n    for (let y = 0; y < piece.length; y++) {\n        for (let x = 0; x < piece[y].length; x++) {\n            if (piece[y][x] === 1) {\n                if (position[0] + y >= 8 || position[1] + x >= 8 || position[1] + x < 0) {\n                    return false\n                }\n                if (matrix[position[0] + y][position[1] + x] === 1) {\n                    return false\n                }\n            }\n        }\n    }\n    return true\n}\n\n// Fija la pieza actual en la matriz\nfunction fix_piece(): void {\n    for (let y = 0; y < tetriminos[current_piece!].length; y++) {\n        for (let x = 0; x < tetriminos[current_piece!][y].length; x++) {\n            if (tetriminos[current_piece!][y][x] === 1) {\n                matrix[current_position[0] + y][current_position[1] + x] = 1\n            }\n        }\n    }\n}\n\n// Función principal del juego\nfunction game_loop(): void {\n    generate_new_piece()\n    basic.forever(function () {\n        if (input.buttonIsPressed(Button.A)) {\n            // Mueve la pieza a la izquierda\n            if (can_move(tetriminos[current_piece!], [current_position[0], current_position[1] - 1])) {\n                current_position[1] -= 1\n            }\n        }\n        if (input.buttonIsPressed(Button.B)) {\n            // Mueve la pieza a la derecha\n            if (can_move(tetriminos[current_piece!], [current_position[0], current_position[1] + 1])) {\n                current_position[1] += 1\n            }\n        }\n\n        // Mueve la pieza hacia abajo automáticamente\n        if (can_move(tetriminos[current_piece!], [current_position[0] + 1, current_position[1]])) {\n            move_down()\n        } else {\n            fix_piece()  // Fija la pieza cuando no puede bajar más\n            generate_new_piece()  // Genera una nueva pieza\n        }\n\n        update_screen()\n        draw_piece(tetriminos[current_piece!], current_position)\n        basic.pause(500)  // Controla la velocidad de caída\n    })\n}\n\n// Inicia el juego\ngame_loop("],[1,"basic.forever(function () {\n\t\n}"],[0,")\n"]],"start1":0,"start2":0,"length1":4156,"length2":33}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"ts"],[1,"py"],[0,"prj\"\n}\n"]],"start1":329,"start2":329,"length1":17,"length2":17}]},{"type":"edited","filename":"main.py","patch":[{"diffs":[[1,"def on_forever():\n    pass\nbasic.forever(on_forever)\n"]],"start1":0,"start2":0,"length1":0,"length2":53}]}]},{"timestamp":1728942401946,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"es><"],[-1,"variable id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</variable><variable id=\"_K0%8orwx:chD*h`JBAU\">y2</variable><variable id=\"nvyYORrYmP50G|Zl|t(k\">x2</variable><variable id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</variable><variable id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</variable><variable id=\"8@L.uSg|)em|v,nLG21a\">x3</variable><variable id=\"d%gx,XfAl,tF*a9~M+ti\">colors</variable><variable id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</variable><variable id=\"5A+-xu$jd{roy#b#Gc*L\">keys</variable><variable id=\"7u{NfeGykk.J=`/e0(7[\">current_position</variable><variable id=\"Ur%nG5OmwXFnzD=Oe2?x\">list</variable><variable id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</variable><variable id=\"Q{E[8P:J;/d*0#SVU!13\">y4</variable><variable id=\"0CxYrH5}BTT)}558qL-=\">x4</variable><variable id=\"}5l}[dPvlahNpt7o=@I:\">y5</variable><variable id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</variable><variable id=\"?iH;Rs=kCUO:vfDcK3`=\">row</variable><"],[0,"/var"]],"start1":63,"start2":63,"length1":887,"length2":8},{"diffs":[[0," x=\""],[-1,"2"],[0,"0\" y=\""],[-1,"2"],[0,"0\"><"],[-1,"statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let current_piece: string | null = null\" numlines=\"1\" declaredvars=\"current_piece\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"neopixel_create\"><field name=\"pin\">DigitalPin.P0</field><field name=\"mode\">NeoPixelMode.RGB</field><value name=\"numleds\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let tetriminos: { [key: string]: number[][] } = {\" line1=\"    I: [[1, 1, 1, 1]],\" line2=\"    O: [[1, 1], [1, 1]],\" line3=\"    T: [[0, 1, 0], [1, 1, 1]],\" line4=\"    L: [[1, 0], [1, 0], [1, 1]],\" line5=\"    Z: [[1, 1, 0], [0, 1, 1]]\" line6=\"}\" numlines=\"7\" declaredvars=\"tetriminos\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let colors: { [key: string]: number } = {\" line1=\"    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié &quot;Cyan&quot; por &quot;Blue&quot;\" line2=\"    O: neopixel.colors(NeoPixelColors.Yellow),\" line3=\"    T: neopixel.colors(NeoPixelColors.Purple),\" line4=\"    L: neopixel.colors(NeoPixelColors.Orange),\" line5=\"    Z: neopixel.colors(NeoPixelColors.Red)\" line6=\"}\" numlines=\"7\" declaredvars=\"colors\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Inicializa la matriz vacía (8x8)</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Inicia el juego</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"803\" y=\"20\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block type=\"function_definition\" x=\"1160\" y=\"20\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><field name=\"function_name\">draw_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Dibuja la pieza actual en la posición especificada</comment><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><comment pinned=\"false\" h=\"80\" w=\"160\">Utiliza una cadena vacía si es null</comment><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.Red</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"d%gx,XfAl,tF*a9~M+ti\">colors</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"3234\" y=\"20\"><mutation name=\"can_move\" functionid=\"=GPvIXR4FOk_Sh@w[{bg\"><arg name=\"piece\" id=\"2cd52k27be0eab4fspo7up\" type=\"Array\"></arg><arg name=\"position\" id=\"2y95toicw2mjryxpq9b6\" type=\"Array\"></arg></mutation><field name=\"function_name\">can_move</field><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica si la pieza puede moverse a una nueva posición</comment><value name=\"2cd52k27be0eab4fspo7up\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"2y95toicw2mjryxpq9b6\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></next></block></statement></block></statement></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"20\" y=\"1169\"><mutation name=\"update_screen\" functionid=\"pCOZs/Tdv(b)S$*9:1F[\"></mutation><field name=\"function_name\">update_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Actualiza la pantalla con la matriz del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.White</field></shadow></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1170\" y=\"1169\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><field name=\"function_name\">game_loop</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función principal del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"basic.forever(function () {\" line1=\"        if (input.buttonIsPressed(Button.A)) {\" line2=\"            // Mueve la pieza a la izquierda\" line3=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] - 1])) {\" line4=\"                current_position[1] -= 1\" line5=\"            }\" line6=\"        }\" line7=\"        if (input.buttonIsPressed(Button.B)) {\" line8=\"            // Mueve la pieza a la derecha\" line9=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] + 1])) {\" line10=\"                current_position[1] += 1\" line11=\"            }\" line12=\"        }\" line13=\"\" line14=\"        // Mueve la pieza hacia abajo automáticamente\" line15=\"        if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0] + 1, current_position[1]])) {\" line16=\"            move_down()\" line17=\"        } else {\" line18=\"            fix_piece()  // Fija la pieza cuando no puede bajar más\" line19=\"            generate_new_piece()  // Genera una nueva pieza\" line20=\"        }\" line21=\"\" line22=\"        update_screen()\" line23=\"        draw_piece(tetriminos[current_piece || &quot;&quot;] || [], current_position)\" line24=\"        basic.pause(500)  // Controla la velocidad de caída\" line25=\"    })\" numlines=\"26\"></mutation></block></next></block></statement></block><block type=\"function_definition\" x=\"2273\" y=\"1169\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><field name=\"function_name\">generate_new_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Genera una nueva pieza aleatoria</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let keys = Object.keys(tetriminos)\" numlines=\"1\" declaredvars=\"keys\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random_deprecated\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><next><block type=\"function_call\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3500\" y=\"1169\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><field name=\"function_name\">clear_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función para limpiar la pantalla</comment><statement name=\"STACK\"><block type=\"neopixel_clear\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"3822\" y=\"1169\"><mutation name=\"move_down\" functionid=\"VoyC|Bf.BZsEklg-A_F0\"></mutation><field name=\"function_name\">move_down</field><comment pinned=\"false\" h=\"80\" w=\"160\">Mueve la pieza hacia abajo</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"current_position[0] += 1\" numlines=\"1\"></mutation></block></statement></block><block type=\"function_definition\" x=\"4117\" y=\"1169\"><mutation name=\"fix_piece\" functionid=\"j_f/~n$=!bkh8b:D)}Q*\"></mutation><field name=\"function_name\">fix_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fija la pieza actual en la matriz</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><statement name=\"DO0\"><block type=\"pxt_controls_for\"><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica que current_piece no sea null</comment><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"lists_index_set\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value></block></value><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement></block></statement></block></statement></block></statement></block></statement"],[1,"/block><block type=\"device_forever\" x=\"205\" y=\"0\""],[0,"></b"]],"start1":104,"start2":104,"length1":33884,"length2":67}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[1,"let np = neopixel.create(DigitalPin.P0, 64, NeoPixelMode.RGB)\nlet matrix: number[][] = []\nlet tetriminos: { [key: string]: number[][] } = {\n    I: [[1, 1, 1, 1]],\n    O: [[1, 1], [1, 1]],\n    T: [[0, 1, 0], [1, 1, 1]],\n    L: [[1, 0], [1, 0], [1, 1]],\n    Z: [[1, 1, 0], [0, 1, 1]]\n}\nlet colors: { [key: string]: number } = {\n    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié \"Cyan\" por \"Blue\"\n    O: neopixel.colors(NeoPixelColors.Yellow),\n    T: neopixel.colors(NeoPixelColors.Purple),\n    L: neopixel.colors(NeoPixelColors.Orange),\n    Z: neopixel.colors(NeoPixelColors.Red)\n}\n\nlet current_piece: string | null = null\nlet current_position: number[] = [0, 0]\n\n// Inicializa la matriz vacía (8x8)\nfor (let y = 0; y < 8; y++) {\n    let row: number[] = []\n    for (let x = 0; x < 8; x++) {\n        row.push(0)\n    }\n    matrix.push(row)\n}\n\n// Función para limpiar la pantalla\nfunction clear_screen(): void {\n    np.clear()\n    np.show()\n}\n\n// Actualiza la pantalla con la matriz del juego\nfunction update_screen(): void {\n    clear_screen()\n    for (let y = 0; y < 8; y++) {\n        for (let x = 0; x < 8; x++) {\n            if (matrix[y][x] === 1) {\n                np.setPixelColor(y * 8 + x, neopixel.colors(NeoPixelColors.White))\n            }\n        }\n    }\n    np.show()\n}\n\n// Dibuja la pieza actual en la posición especificada\nfunction draw_piece(piece: number[][], position: number[]): void {\n    for (let y = 0; y < piece.length; y++) {\n        for (let x = 0; x < piece[y].length; x++) {\n            if (piece[y][x] === 1) {\n                np.setPixelColor((position[0] + y) * 8 + (position[1] + x), colors[current_piece!])\n            }\n        }\n    }\n    np.show()\n}\n\n// Mueve la pieza hacia abajo\nfunction move_down(): void {\n    current_position[0] += 1\n}\n\n// Genera una nueva pieza aleatoria\nfunction generate_new_piece(): void {\n    let keys = Object.keys(tetriminos)\n    current_piece = keys[Math.randomRange(0, keys.length - 1)]\n    current_position = [0, 3]\n    draw_piece(tetriminos[current_piece], current_position)\n}\n\n"],[0,"// Verifica si la pi"]],"start1":0,"start2":0,"length1":20,"length2":2068},{"diffs":[[0,"can_move"],[-1," "],[0,"(piece: "],[-1,"any"],[1,"number[]"],[0,"[], posi"]],"start1":2116,"start2":2116,"length1":28,"length2":32},{"diffs":[[0,"ition: number[])"],[1,": boolean"],[0," {\n    for (let "]],"start1":2147,"start2":2147,"length1":32,"length2":41},{"diffs":[[0,"et y"],[-1,"4"],[0," = 0; y"],[-1,"4"],[0," <"],[-1,"="],[0," pie"]],"start1":2185,"start2":2185,"length1":20,"length2":17},{"diffs":[[0,"ngth"],[-1," - 1"],[0,"; y"],[-1,"4"],[0,"++) "]],"start1":2207,"start2":2207,"length1":16,"length2":11},{"diffs":[[0,"et x"],[-1,"4"],[0," = 0; x"],[-1,"4"],[0," <"],[-1,"="],[0," piece[y"],[-1,"4"],[0,"].length"],[-1," - 1"],[0,"; x"],[-1,"4"],[0,"++) "]],"start1":2234,"start2":2234,"length1":45,"length2":36},{"diffs":[[0,"ce[y"],[-1,"4"],[0,"][x"],[-1,"4"],[0,"] =="],[1,"="],[0," 1) "]],"start1":2291,"start2":2291,"length1":17,"length2":16},{"diffs":[[0,"n[0] + y"],[-1,"4"],[0," >= 8 ||"]],"start1":2336,"start2":2336,"length1":17,"length2":16},{"diffs":[[0,"n[1] + x"],[-1,"4"],[0," >= 8 ||"]],"start1":2360,"start2":2360,"length1":17,"length2":16},{"diffs":[[0,"n[1] + x"],[-1,"4"],[0," < 0) {\n"]],"start1":2384,"start2":2384,"length1":17,"length2":16},{"diffs":[[0,"n[0] + y"],[-1,"4"],[0,"][positi"]],"start1":2485,"start2":2485,"length1":17,"length2":16},{"diffs":[[0," + x"],[-1,"4"],[0,"] =="],[1,"="],[0," 1) "]],"start1":2506,"start2":2506,"length1":13,"length2":13},{"diffs":[[0," true\n}\n"],[1,"\n"],[0,"// Fija "]],"start1":2612,"start2":2612,"length1":16,"length2":17},{"diffs":[[0,"iece"],[-1," "],[0,"()"],[-1," {\n    if (current_piece) {\n        // Verifica que current_piece no sea null\n    "],[1,": void {\n"],[0,"    "]],"start1":2672,"start2":2672,"length1":93,"length2":19},{"diffs":[[0,"et y"],[-1,"5"],[0," = 0; y"],[-1,"5"],[0," <"],[-1,"="],[0," tet"]],"start1":2697,"start2":2697,"length1":20,"length2":17},{"diffs":[[0,"iece"],[1,"!"],[0,"].length"],[-1," - 1"],[0,"; y"],[-1,"5"],[0,"++) "]],"start1":2731,"start2":2731,"length1":24,"length2":20},{"diffs":[[0,") {\n        "],[-1,"    "],[0,"for (let x5 "]],"start1":2749,"start2":2749,"length1":28,"length2":24},{"diffs":[[0,"et x"],[-1,"5"],[0," = 0; x"],[-1,"5"],[0," <"],[-1,"="],[0," tet"]],"start1":2767,"start2":2767,"length1":20,"length2":17},{"diffs":[[0,"iece"],[1,"!"],[0,"][y"],[-1,"5"],[0,"].length"],[-1," - 1"],[0,"; x"],[-1,"5"],[0,"++) "]],"start1":2801,"start2":2801,"length1":28,"length2":23},{"diffs":[[0,"            "],[-1," "],[-1,"   "],[0,"if (tetrimin"]],"start1":2826,"start2":2826,"length1":28,"length2":24},{"diffs":[[0,"iece"],[1,"!"],[0,"][y"],[-1,"5"],[0,"][x"],[-1,"5"],[0,"] =="],[1,"="],[0," 1) "]],"start1":2862,"start2":2862,"length1":20,"length2":20},{"diffs":[[0,"        "],[-1," "],[-1,"   "],[0,"matrix[c"]],"start1":2892,"start2":2892,"length1":20,"length2":16},{"diffs":[[0,"n[0] + y"],[-1,"5"],[0,"][curren"]],"start1":2922,"start2":2922,"length1":17,"length2":16},{"diffs":[[0," + x"],[-1,"5"],[0,"] = 1\n"],[-1,"                }\n"],[0,"    "]],"start1":2951,"start2":2951,"length1":33,"length2":14},{"diffs":[[0,"}\n}\n"],[-1,"// Actualiza la pantalla con la matriz del juego\nfunction update_screen () {\n    clear_screen()\n    for (let y2 = 0; y2 <= 7; y2++) {\n        for (let x2 = 0; x2 <= 7; x2++) {\n            if (matrix[y2][x2] == 1) {\n                np.setPixelColor(y2 * 8 + x2, neopixel.colors(NeoPixelColors.White))\n            }\n        }\n    }\n    np.show()\n}"],[0,"\n// "]],"start1":2989,"start2":2989,"length1":353,"length2":8},{"diffs":[[0,"ame_loop"],[-1," "],[0,"()"],[1,": void"],[0," {\n    g"]],"start1":3035,"start2":3035,"length1":19,"length2":24},{"diffs":[[0,"urrent_piece"],[-1," || \"\"] || ["],[1,"!"],[0,"], [current_"]],"start1":3240,"start2":3240,"length1":36,"length2":25},{"diffs":[[0,"urrent_piece"],[-1," || \"\"] || ["],[1,"!"],[0,"], [current_"]],"start1":3499,"start2":3499,"length1":36,"length2":25},{"diffs":[[0,"nt_piece"],[-1," || \"\"] || ["],[1,"!"],[0,"], [curr"]],"start1":3723,"start2":3723,"length1":28,"length2":17},{"diffs":[[0,"iece"],[-1," || \"\"] || ["],[1,"!"],[0,"], c"]],"start1":4029,"start2":4029,"length1":20,"length2":9},{"diffs":[[0,")\n}\n"],[-1,"// Dibuja la pieza actual en la posición especificada\nfunction draw_piece (piece: any[], position: number[]) {\n    for (let y3 = 0; y3 <= piece.length - 1; y3++) {\n        for (let x3 = 0; x3 <= piece[y3].length - 1; x3++) {\n            if (piece[y3][x3] == 1) {\n                // Utiliza una cadena vacía si es null\n                np.setPixelColor((position[0] + y3) * 8 + (position[1] + x3), colors[0])\n            }\n        }\n    }\n    np.show()\n}\n// Mueve la pieza hacia abajo\nfunction move_down () {\n    current_position[0] += 1\n}\n// Función para limpiar la pantalla\nfunction clear_screen () {\n    np.clear()\n    np.show()\n}\n// Genera una nueva pieza aleatoria\nfunction generate_new_piece () {\n    let keys = Object.keys(tetriminos)\ncurrent_piece = keys[Math.randomRange(0, keys.length - 1)]\n    current_position = [0, 3]\n    draw_piece(tetriminos[current_piece], current_position)\n}\nlet matrix: number[][] = []\nlet current_position: number[] = []\nlet np: neopixel.Strip = null\nlet current_piece: string | null = null\nnp = neopixel.create(DigitalPin.P0, 64, NeoPixelMode.RGB)\nlet tetriminos: { [key: string]: number[][] } = {\n    I: [[1, 1, 1, 1]],\n    O: [[1, 1], [1, 1]],\n    T: [[0, 1, 0], [1, 1, 1]],\n    L: [[1, 0], [1, 0], [1, 1]],\n    Z: [[1, 1, 0], [0, 1, 1]]\n}\nlet colors: { [key: string]: number } = {\n    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié \"Cyan\" por \"Blue\"\n    O: neopixel.colors(NeoPixelColors.Yellow),\n    T: neopixel.colors(NeoPixelColors.Purple),\n    L: neopixel.colors(NeoPixelColors.Orange),\n    Z: neopixel.colors(NeoPixelColors.Red)\n}\ncurrent_position = [0, 0]\n// Inicializa la matriz vacía (8x8)\nfor (let index = 0; index < 8; index++) {\n    let row: number[] = []\n    for (let index = 0; index < 8; index++) {\n        row.push(0)\n    }\n    matrix.push(row)\n}"],[0,"\n// "]],"start1":4120,"start2":4120,"length1":1812,"length2":8}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":329,"start2":329,"length1":21,"length2":17}]}]},{"timestamp":1728942578870,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"art\" x=\""],[1,"2"],[0,"0\" y=\""],[1,"2"],[0,"0\"><stat"]],"start1":979,"start2":979,"length1":22,"length2":24},{"diffs":[[0,"></block><block "],[1,"type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"803\" y=\"20\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block "],[0,"type=\"function_d"]],"start1":4194,"start2":4194,"length1":32,"length2":604},{"diffs":[[0,"=\"11"],[-1,"9"],[0,"6"],[1,"0"],[0,"\" y=\""],[-1,"-54"],[1,"20"],[0,"\"><m"]],"start1":4810,"start2":4810,"length1":18,"length2":17},{"diffs":[[0,"ock "],[-1,"type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"783\" y=\"0\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block "],[0,"type"]],"start1":10646,"start2":10646,"length1":579,"length2":8},{"diffs":[[0,"=\"32"],[-1,"62"],[1,"34"],[0,"\" y=\""],[-1,"-57"],[1,"20"],[0,"\"><m"]],"start1":10678,"start2":10678,"length1":18,"length2":17},{"diffs":[[0,"ion\" x=\""],[1,"2"],[0,"0\" y=\"11"],[-1,"4"],[1,"6"],[0,"9\"><muta"]],"start1":20015,"start2":20015,"length1":25,"length2":26},{"diffs":[[0,"=\"11"],[-1,"5"],[1,"7"],[0,"0\" y=\"11"],[-1,"4"],[1,"6"],[0,"9\"><"]],"start1":23381,"start2":23381,"length1":18,"length2":18},{"diffs":[[0,"=\"22"],[-1,"9"],[1,"7"],[0,"3\" y=\"11"],[-1,"83"],[1,"69"],[0,"\"><m"]],"start1":25262,"start2":25262,"length1":19,"length2":19},{"diffs":[[0,"x=\"3"],[-1,"48"],[1,"50"],[0,"0\" y=\"11"],[-1,"4"],[1,"6"],[0,"9\"><"]],"start1":28043,"start2":28043,"length1":19,"length2":19},{"diffs":[[0,"=\"38"],[-1,"0"],[1,"2"],[0,"2\" y=\"11"],[-1,"4"],[1,"6"],[0,"9\"><"]],"start1":28666,"start2":28666,"length1":18,"length2":18},{"diffs":[[0,"x=\"4"],[-1,"09"],[1,"11"],[0,"7\" y=\"11"],[-1,"4"],[1,"6"],[0,"9\"><"]],"start1":29100,"start2":29100,"length1":19,"length2":19}]}]},{"timestamp":1728944423217,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"pe=\""],[-1,"function_definition\" x=\"1244\" y=\"-103"],[1,"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let current_piece: string | null = null\" numlines=\"1\" declaredvars=\"current_piece\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"neopixel_create\"><field name=\"pin\">DigitalPin.P0</field><field name=\"mode\">NeoPixelMode.RGB</field><value name=\"numleds\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let tetriminos: { [key: string]: number[][] } = {\" line1=\"    I: [[1, 1, 1, 1]],\" line2=\"    O: [[1, 1], [1, 1]],\" line3=\"    T: [[0, 1, 0], [1, 1, 1]],\" line4=\"    L: [[1, 0], [1, 0], [1, 1]],\" line5=\"    Z: [[1, 1, 0], [0, 1, 1]]\" line6=\"}\" numlines=\"7\" declaredvars=\"tetriminos\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let colors: { [key: string]: number } = {\" line1=\"    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié &quot;Cyan&quot; por &quot;Blue&quot;\" line2=\"    O: neopixel.colors(NeoPixelColors.Yellow),\" line3=\"    T: neopixel.colors(NeoPixelColors.Purple),\" line4=\"    L: neopixel.colors(NeoPixelColors.Orange),\" line5=\"    Z: neopixel.colors(NeoPixelColors.Red)\" line6=\"}\" numlines=\"7\" declaredvars=\"colors\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Inicializa la matriz vacía (8x8)</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Inicia el juego</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1196\" y=\"-54"],[0,"\"><m"]],"start1":966,"start2":966,"length1":45,"length2":3288},{"diffs":[[0,"ock "],[-1,"type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let current_piece: string | null = null\" numlines=\"1\" declaredvars=\"current_piece\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"neopixel_create\"><field name=\"pin\">DigitalPin.P0</field><field name=\"mode\">NeoPixelMode.RGB</field><value name=\"numleds\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let tetriminos: { [key: string]: number[][] } = {\" line1=\"    I: [[1, 1, 1, 1]],\" line2=\"    O: [[1, 1], [1, 1]],\" line3=\"    T: [[0, 1, 0], [1, 1, 1]],\" line4=\"    L: [[1, 0], [1, 0], [1, 1]],\" line5=\"    Z: [[1, 1, 0], [0, 1, 1]]\" line6=\"}\" numlines=\"7\" declaredvars=\"tetriminos\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let colors: { [key: string]: number } = {\" line1=\"    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié &quot;Cyan&quot; por &quot;Blue&quot;\" line2=\"    O: neopixel.colors(NeoPixelColors.Yellow),\" line3=\"    T: neopixel.colors(NeoPixelColors.Purple),\" line4=\"    L: neopixel.colors(NeoPixelColors.Orange),\" line5=\"    Z: neopixel.colors(NeoPixelColors.Red)\" line6=\"}\" numlines=\"7\" declaredvars=\"colors\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Inicializa la matriz vacía (8x8)</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Inicia el juego</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block "],[0,"type"]],"start1":10073,"start2":10073,"length1":3252,"length2":8},{"diffs":[[0,"x=\"3"],[-1,"310"],[1,"262"],[0,"\" y=\"-"],[-1,"106"],[1,"57"],[0,"\"><m"]],"start1":10675,"start2":10675,"length1":20,"length2":19},{"diffs":[[0," x=\""],[-1,"3480"],[1,"2293"],[0,"\" y=\"11"],[-1,"49\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><field name=\"function_name\">clear_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función para limpiar la pantalla</comment><statement name=\"STACK\"><block type=\"neopixel_clear\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"2333\" y=\"122"],[1,"8"],[0,"3\"><"]],"start1":25258,"start2":25258,"length1":642,"length2":20},{"diffs":[[0,"_definition\""],[1," x=\"3480\" y=\"1149\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><field name=\"function_name\">clear_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función para limpiar la pantalla</comment><statement name=\"STACK\"><block type=\"neopixel_clear\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"function_definition\""],[0," x=\"3802\" y="]],"start1":28028,"start2":28028,"length1":24,"length2":646}]}]},{"timestamp":1728947242501,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":329,"start2":329,"length1":17,"length2":21}]}]},{"timestamp":1728947310915,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":329,"start2":329,"length1":21,"length2":17}]}]},{"timestamp":1731413765643,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"=\"12"],[-1,"96\" y=\"-157\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><field name=\"function_name\">draw_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Dibuja la pieza actual en la posición especificada</comment><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><comment pinned=\"false\" h=\"80\" w=\"160\">Utiliza una cadena vacía si es null</comment><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.Red</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"d%gx,XfAl,tF*a9~M+ti\">colors</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let current_piece: string | null = null\" numlines=\"1\" declaredvars=\"current_piece\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"neopixel_create\"><field name=\"pin\">DigitalPin.P0</field><field name=\"mode\">NeoPixelMode.RGB</field><value name=\"numleds\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let tetriminos: { [key: string]: number[][] } = {\" line1=\"    I: [[1, 1, 1, 1]],\" line2=\"    O: [[1, 1], [1, 1]],\" line3=\"    T: [[0, 1, 0], [1, 1, 1]],\" line4=\"    L: [[1, 0], [1, 0], [1, 1]],\" line5=\"    Z: [[1, 1, 0], [0, 1, 1]]\" line6=\"}\" numlines=\"7\" declaredvars=\"tetriminos\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let colors: { [key: string]: number } = {\" line1=\"    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié &quot;Cyan&quot; por &quot;Blue&quot;\" line2=\"    O: neopixel.colors(NeoPixelColors.Yellow),\" line3=\"    T: neopixel.colors(NeoPixelColors.Purple),\" line4=\"    L: neopixel.colors(NeoPixelColors.Orange),\" line5=\"    Z: neopixel.colors(NeoPixelColors.Red)\" line6=\"}\" numlines=\"7\" declaredvars=\"colors\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Inicializa la matriz vacía (8x8)</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Inicia el juego</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3366\" y=\"-162\"><mutation name=\"can_move\" functionid=\"=GPvIXR4FOk_Sh@w[{bg\"><arg name=\"piece\" id=\"2cd52k27be0eab4fspo7up\" type=\"Array\"></arg><arg name=\"position\" id=\"2y95toicw2mjryxpq9b6\" type=\"Array\"></arg></mutation><field name=\"function_name\">can_move</field><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica si la pieza puede moverse a una nueva posición</comment><value name=\"2cd52k27be0eab4fspo7up\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"2y95toicw2mjryxpq9b6\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></next></block></statement></block></statement></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block><block type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"783\" y=\"0\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block type=\"function_definition\" x=\"0\" y=\"1149\"><mutation name=\"update_screen\" functionid=\"pCOZs/Tdv(b)S$*9:1F[\"></mutation><field name=\"function_name\">update_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Actualiza la pantalla con la matriz del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.White</field></shadow></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1150\" y=\"1149\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><field name=\"function_name\">game_loop</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función principal del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"basic.forever(function () {\" line1=\"        if (input.buttonIsPressed(Button.A)) {\" line2=\"            // Mueve la pieza a la izquierda\" line3=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] - 1])) {\" line4=\"                current_position[1] -= 1\" line5=\"            }\" line6=\"        }\" line7=\"        if (input.buttonIsPressed(Button.B)) {\" line8=\"            // Mueve la pieza a la derecha\" line9=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] + 1])) {\" line10=\"                current_position[1] += 1\" line11=\"            }\" line12=\"        }\" line13=\"\" line14=\"        // Mueve la pieza hacia abajo automáticamente\" line15=\"        if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0] + 1, current_position[1]])) {\" line16=\"            move_down()\" line17=\"        } else {\" line18=\"            fix_piece()  // Fija la pieza cuando no puede bajar más\" line19=\"            generate_new_piece()  // Genera una nueva pieza\" line20=\"        }\" line21=\"\" line22=\"        update_screen()\" line23=\"        draw_piece(tetriminos[current_piece || &quot;&quot;] || [], current_position)\" line24=\"        basic.pause(500)  // Controla la velocidad de caída\" line25=\"    })\" numlines=\"26\"></mutation></block></next></block></statement></block><block type=\"function_definition\" x=\"3480\" y=\"1149\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><field name=\"function_name\">clear_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función para limpiar la pantalla</comment><statement name=\"STACK\"><block type=\"neopixel_clear\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value"],[1,"44\" y=\"-103\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><field name=\"function_name\">draw_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Dibuja la pieza actual en la posición especificada</comment><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><comment pinned=\"false\" h=\"80\" w=\"160\">Utiliza una cadena vacía si es null</comment><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.Red</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"d%gx,XfAl,tF*a9~M+ti\">colors</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let current_piece: string | null = null\" numlines=\"1\" declaredvars=\"current_piece\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"neopixel_create\"><field name=\"pin\">DigitalPin.P0</field><field name=\"mode\">NeoPixelMode.RGB</field><value name=\"numleds\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let tetriminos: { [key: string]: number[][] } = {\" line1=\"    I: [[1, 1, 1, 1]],\" line2=\"    O: [[1, 1], [1, 1]],\" line3=\"    T: [[0, 1, 0], [1, 1, 1]],\" line4=\"    L: [[1, 0], [1, 0], [1, 1]],\" line5=\"    Z: [[1, 1, 0], [0, 1, 1]]\" line6=\"}\" numlines=\"7\" declaredvars=\"tetriminos\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let colors: { [key: string]: number } = {\" line1=\"    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié &quot;Cyan&quot; por &quot;Blue&quot;\" line2=\"    O: neopixel.colors(NeoPixelColors.Yellow),\" line3=\"    T: neopixel.colors(NeoPixelColors.Purple),\" line4=\"    L: neopixel.colors(NeoPixelColors.Orange),\" line5=\"    Z: neopixel.colors(NeoPixelColors.Red)\" line6=\"}\" numlines=\"7\" declaredvars=\"colors\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Inicializa la matriz vacía (8x8)</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Inicia el juego</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"783\" y=\"0\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block type=\"function_definition\" x=\"3310\" y=\"-106\"><mutation name=\"can_move\" functionid=\"=GPvIXR4FOk_Sh@w[{bg\"><arg name=\"piece\" id=\"2cd52k27be0eab4fspo7up\" type=\"Array\"></arg><arg name=\"position\" id=\"2y95toicw2mjryxpq9b6\" type=\"Array\"></arg></mutation><field name=\"function_name\">can_move</field><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica si la pieza puede moverse a una nueva posición</comment><value name=\"2cd52k27be0eab4fspo7up\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"2y95toicw2mjryxpq9b6\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></next></block></statement></block></statement></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1149\"><mutation name=\"update_screen\" functionid=\"pCOZs/Tdv(b)S$*9:1F[\"></mutation><field name=\"function_name\">update_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Actualiza la pantalla con la matriz del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.White</field></shadow></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1150\" y=\"1149\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><field name=\"function_name\">game_loop</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función principal del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"basic.forever(function () {\" line1=\"        if (input.buttonIsPressed(Button.A)) {\" line2=\"            // Mueve la pieza a la izquierda\" line3=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] - 1])) {\" line4=\"                current_position[1] -= 1\" line5=\"            }\" line6=\"        }\" line7=\"        if (input.buttonIsPressed(Button.B)) {\" line8=\"            // Mueve la pieza a la derecha\" line9=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] + 1])) {\" line10=\"                current_position[1] += 1\" line11=\"            }\" line12=\"        }\" line13=\"\" line14=\"        // Mueve la pieza hacia abajo automáticamente\" line15=\"        if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0] + 1, current_position[1]])) {\" line16=\"            move_down()\" line17=\"        } else {\" line18=\"            fix_piece()  // Fija la pieza cuando no puede bajar más\" line19=\"            generate_new_piece()  // Genera una nueva pieza\" line20=\"        }\" line21=\"\" line22=\"        update_screen()\" line23=\"        draw_piece(tetriminos[current_piece || &quot;&quot;] || [], current_position)\" line24=\"        basic.pause(500)  // Controla la velocidad de caída\" line25=\"    })\" numlines=\"26\"></mutation></block></next></block></statement></block><block type=\"function_definition\" x=\"3480\" y=\"1149\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><field name=\"function_name\">clear_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función para limpiar la pantalla</comment><statement name=\"STACK\"><block type=\"neopixel_clear\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"2333\" y=\"1223\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><field name=\"function_name\">generate_new_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Genera una nueva pieza aleatoria</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let keys = Object.keys(tetriminos)\" numlines=\"1\" declaredvars=\"keys\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random_deprecated\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><next><block type=\"function_call\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value></block></next></block></next"],[0,"></b"]],"start1":992,"start2":992,"length1":24817,"length2":27599},{"diffs":[[0,"ck><"],[-1,"block type=\"function_definition\" x=\"2368\" y=\"1261\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><field name=\"function_name\">generate_new_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Genera una nueva pieza aleatoria</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let keys = Object.keys(tetriminos)\" numlines=\"1\" declaredvars=\"keys\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random_deprecated\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><next><block type=\"function_call\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value></block></next></block></next></block></next></block></statement></block><"],[0,"/xml"]],"start1":34869,"start2":34869,"length1":2790,"length2":8}]}]},{"timestamp":1731413775713,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"x=\"1"],[-1,"353"],[1,"296"],[0,"\" y=\"-"],[-1,"206"],[1,"157"],[0,"\"><m"]],"start1":991,"start2":991,"length1":20,"length2":20},{"diffs":[[0,"ock "],[-1,"type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"783\" y=\"0\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block "],[0,"type"]],"start1":10074,"start2":10074,"length1":579,"length2":8},{"diffs":[[0,"x=\"3"],[-1,"707"],[1,"366"],[0,"\" y=\"-1"],[1,"6"],[0,"2"],[-1,"7"],[0,"\"><m"]],"start1":10105,"start2":10105,"length1":20,"length2":20},{"diffs":[[0,"></block><block "],[1,"type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"783\" y=\"0\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block "],[0,"type=\"function_d"]],"start1":19407,"start2":19407,"length1":32,"length2":603},{"diffs":[[0,"x=\"2"],[-1,"403"],[1,"368"],[0,"\" y=\"1"],[-1,"303"],[1,"261"],[0,"\"><m"]],"start1":32124,"start2":32124,"length1":20,"length2":20}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":329,"start2":329,"length1":17,"length2":21}]}]},{"timestamp":1731414156571,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"on\" "],[-1,"id=\"#~?jPz=H3S]Ln?Ka5/3%\" x=\"0"],[1,"x=\"1353"],[0,"\" y=\""],[-1,"0"],[1,"-206"],[0,"\"><m"]],"start1":987,"start2":987,"length1":44,"length2":24},{"diffs":[[0,"3\"><"],[-1,"shadow type=\"argument_reporter_array\" id=\"XBey!UM:m#gs+{)(PzO=\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></shadow><block type=\"argument_reporter_array\" id=\"4q4Xr`HUeAehFnWrAoHd\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"n0b59qzadfncsv2ig101j\"><shadow type=\"argument_reporter_array\" id=\"N/6f9JLi1R@?B9e:]Y,j\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></shadow><block type=\"argument_reporter_array\" id=\"N{=+H2ZK^d^ry1KL+S*M\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value"],[1,"block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><comment pinned=\"false\" h=\"80\" w=\"160\">Utiliza una cadena vacía si es null</comment><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.Red</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"d%gx,XfAl,tF*a9~M+ti\">colors</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let current_piece: string | null = null\" numlines=\"1\" declaredvars=\"current_piece\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"neopixel_create\"><field name=\"pin\">DigitalPin.P0</field><field name=\"mode\">NeoPixelMode.RGB</field><value name=\"numleds\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let tetriminos: { [key: string]: number[][] } = {\" line1=\"    I: [[1, 1, 1, 1]],\" line2=\"    O: [[1, 1], [1, 1]],\" line3=\"    T: [[0, 1, 0], [1, 1, 1]],\" line4=\"    L: [[1, 0], [1, 0], [1, 1]],\" line5=\"    Z: [[1, 1, 0], [0, 1, 1]]\" line6=\"}\" numlines=\"7\" declaredvars=\"tetriminos\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let colors: { [key: string]: number } = {\" line1=\"    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié &quot;Cyan&quot; por &quot;Blue&quot;\" line2=\"    O: neopixel.colors(NeoPixelColors.Yellow),\" line3=\"    T: neopixel.colors(NeoPixelColors.Purple),\" line4=\"    L: neopixel.colors(NeoPixelColors.Orange),\" line5=\"    Z: neopixel.colors(NeoPixelColors.Red)\" line6=\"}\" numlines=\"7\" declaredvars=\"colors\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Inicializa la matriz vacía (8x8)</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Inicia el juego</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"783\" y=\"0\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block type=\"function_definition\" x=\"3707\" y=\"-127\"><mutation name=\"can_move\" functionid=\"=GPvIXR4FOk_Sh@w[{bg\"><arg name=\"piece\" id=\"2cd52k27be0eab4fspo7up\" type=\"Array\"></arg><arg name=\"position\" id=\"2y95toicw2mjryxpq9b6\" type=\"Array\"></arg></mutation><field name=\"function_name\">can_move</field><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica si la pieza puede moverse a una nueva posición</comment><value name=\"2cd52k27be0eab4fspo7up\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"2y95toicw2mjryxpq9b6\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></next></block></statement></block></statement></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1149\"><mutation name=\"update_screen\" functionid=\"pCOZs/Tdv(b)S$*9:1F[\"></mutation><field name=\"function_name\">update_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Actualiza la pantalla con la matriz del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.White</field></shadow></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1150\" y=\"1149\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><field name=\"function_name\">game_loop</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función principal del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"basic.forever(function () {\" line1=\"        if (input.buttonIsPressed(Button.A)) {\" line2=\"            // Mueve la pieza a la izquierda\" line3=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] - 1])) {\" line4=\"                current_position[1] -= 1\" line5=\"            }\" line6=\"        }\" line7=\"        if (input.buttonIsPressed(Button.B)) {\" line8=\"            // Mueve la pieza a la derecha\" line9=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] + 1])) {\" line10=\"                current_position[1] += 1\" line11=\"            }\" line12=\"        }\" line13=\"\" line14=\"        // Mueve la pieza hacia abajo automáticamente\" line15=\"        if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0] + 1, current_position[1]])) {\" line16=\"            move_down()\" line17=\"        } else {\" line18=\"            fix_piece()  // Fija la pieza cuando no puede bajar más\" line19=\"            generate_new_piece()  // Genera una nueva pieza\" line20=\"        }\" line21=\"\" line22=\"        update_screen()\" line23=\"        draw_piece(tetriminos[current_piece || &quot;&quot;] || [], current_position)\" line24=\"        basic.pause(500)  // Controla la velocidad de caída\" line25=\"    })\" numlines=\"26\"></mutation></block></next></block></statement></block><block type=\"function_definition\" x=\"3480\" y=\"1149\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><field name=\"function_name\">clear_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función para limpiar la pantalla</comment><statement name=\"STACK\"><block type=\"neopixel_clear\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"3802\" y=\"1149\"><mutation name=\"move_down\" functionid=\"VoyC|Bf.BZsEklg-A_F0\"></mutation><field name=\"function_name\">move_down</field><comment pinned=\"false\" h=\"80\" w=\"160\">Mueve la pieza hacia abajo</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"current_position[0] += 1\" numlines=\"1\"></mutation></block></statement></block><block type=\"function_definition\" x=\"4097\" y=\"1149\"><mutation name=\"fix_piece\" functionid=\"j_f/~n$=!bkh8b:D)}Q*\"></mutation><field name=\"function_name\">fix_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fija la pieza actual en la matriz</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><statement name=\"DO0\"><block type=\"pxt_controls_for\"><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica que current_piece no sea null</comment><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"lists_index_set\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value></block></value><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement></block></statement></block></statement></block></statement></block></statement></block><block type=\"function_definition\" x=\"2403\" y=\"1303\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><field name=\"function_name\">generate_new_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Genera una nueva pieza aleatoria</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let keys = Object.keys(tetriminos)\" numlines=\"1\" declaredvars=\"keys\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random_deprecated\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><next><block type=\"function_call\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value></block></next></block></next></block></next></block></statement"],[0,"></b"]],"start1":1391,"start2":1391,"length1":664,"length2":33476}]}]},{"timestamp":1731414990973,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":309,"start2":309,"length1":52,"length2":8}]},{"type":"added","filename":"test.ts","value":"// aquí va el archivo \"tests\"; esto no se compilará cuando este paquete se utilice como una extensión.\n"}]}],"snapshots":[{"timestamp":1728932285491,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"Moreno N 02\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1728947242501,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</variable><variable id=\"_K0%8orwx:chD*h`JBAU\">y2</variable><variable id=\"nvyYORrYmP50G|Zl|t(k\">x2</variable><variable id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</variable><variable id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</variable><variable id=\"8@L.uSg|)em|v,nLG21a\">x3</variable><variable id=\"d%gx,XfAl,tF*a9~M+ti\">colors</variable><variable id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</variable><variable id=\"5A+-xu$jd{roy#b#Gc*L\">keys</variable><variable id=\"7u{NfeGykk.J=`/e0(7[\">current_position</variable><variable id=\"Ur%nG5OmwXFnzD=Oe2?x\">list</variable><variable id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</variable><variable id=\"Q{E[8P:J;/d*0#SVU!13\">y4</variable><variable id=\"0CxYrH5}BTT)}558qL-=\">x4</variable><variable id=\"}5l}[dPvlahNpt7o=@I:\">y5</variable><variable id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</variable><variable id=\"?iH;Rs=kCUO:vfDcK3`=\">row</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let current_piece: string | null = null\" numlines=\"1\" declaredvars=\"current_piece\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"neopixel_create\"><field name=\"pin\">DigitalPin.P0</field><field name=\"mode\">NeoPixelMode.RGB</field><value name=\"numleds\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let tetriminos: { [key: string]: number[][] } = {\" line1=\"    I: [[1, 1, 1, 1]],\" line2=\"    O: [[1, 1], [1, 1]],\" line3=\"    T: [[0, 1, 0], [1, 1, 1]],\" line4=\"    L: [[1, 0], [1, 0], [1, 1]],\" line5=\"    Z: [[1, 1, 0], [0, 1, 1]]\" line6=\"}\" numlines=\"7\" declaredvars=\"tetriminos\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let colors: { [key: string]: number } = {\" line1=\"    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié &quot;Cyan&quot; por &quot;Blue&quot;\" line2=\"    O: neopixel.colors(NeoPixelColors.Yellow),\" line3=\"    T: neopixel.colors(NeoPixelColors.Purple),\" line4=\"    L: neopixel.colors(NeoPixelColors.Orange),\" line5=\"    Z: neopixel.colors(NeoPixelColors.Red)\" line6=\"}\" numlines=\"7\" declaredvars=\"colors\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Inicializa la matriz vacía (8x8)</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Inicia el juego</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1196\" y=\"-54\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><field name=\"function_name\">draw_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Dibuja la pieza actual en la posición especificada</comment><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><comment pinned=\"false\" h=\"80\" w=\"160\">Utiliza una cadena vacía si es null</comment><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.Red</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"d%gx,XfAl,tF*a9~M+ti\">colors</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"783\" y=\"0\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block type=\"function_definition\" x=\"3262\" y=\"-57\"><mutation name=\"can_move\" functionid=\"=GPvIXR4FOk_Sh@w[{bg\"><arg name=\"piece\" id=\"2cd52k27be0eab4fspo7up\" type=\"Array\"></arg><arg name=\"position\" id=\"2y95toicw2mjryxpq9b6\" type=\"Array\"></arg></mutation><field name=\"function_name\">can_move</field><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica si la pieza puede moverse a una nueva posición</comment><value name=\"2cd52k27be0eab4fspo7up\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"2y95toicw2mjryxpq9b6\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></next></block></statement></block></statement></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1149\"><mutation name=\"update_screen\" functionid=\"pCOZs/Tdv(b)S$*9:1F[\"></mutation><field name=\"function_name\">update_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Actualiza la pantalla con la matriz del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.White</field></shadow></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1150\" y=\"1149\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><field name=\"function_name\">game_loop</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función principal del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"basic.forever(function () {\" line1=\"        if (input.buttonIsPressed(Button.A)) {\" line2=\"            // Mueve la pieza a la izquierda\" line3=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] - 1])) {\" line4=\"                current_position[1] -= 1\" line5=\"            }\" line6=\"        }\" line7=\"        if (input.buttonIsPressed(Button.B)) {\" line8=\"            // Mueve la pieza a la derecha\" line9=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] + 1])) {\" line10=\"                current_position[1] += 1\" line11=\"            }\" line12=\"        }\" line13=\"\" line14=\"        // Mueve la pieza hacia abajo automáticamente\" line15=\"        if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0] + 1, current_position[1]])) {\" line16=\"            move_down()\" line17=\"        } else {\" line18=\"            fix_piece()  // Fija la pieza cuando no puede bajar más\" line19=\"            generate_new_piece()  // Genera una nueva pieza\" line20=\"        }\" line21=\"\" line22=\"        update_screen()\" line23=\"        draw_piece(tetriminos[current_piece || &quot;&quot;] || [], current_position)\" line24=\"        basic.pause(500)  // Controla la velocidad de caída\" line25=\"    })\" numlines=\"26\"></mutation></block></next></block></statement></block><block type=\"function_definition\" x=\"2293\" y=\"1183\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><field name=\"function_name\">generate_new_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Genera una nueva pieza aleatoria</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let keys = Object.keys(tetriminos)\" numlines=\"1\" declaredvars=\"keys\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random_deprecated\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><next><block type=\"function_call\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3480\" y=\"1149\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><field name=\"function_name\">clear_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función para limpiar la pantalla</comment><statement name=\"STACK\"><block type=\"neopixel_clear\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"3802\" y=\"1149\"><mutation name=\"move_down\" functionid=\"VoyC|Bf.BZsEklg-A_F0\"></mutation><field name=\"function_name\">move_down</field><comment pinned=\"false\" h=\"80\" w=\"160\">Mueve la pieza hacia abajo</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"current_position[0] += 1\" numlines=\"1\"></mutation></block></statement></block><block type=\"function_definition\" x=\"4097\" y=\"1149\"><mutation name=\"fix_piece\" functionid=\"j_f/~n$=!bkh8b:D)}Q*\"></mutation><field name=\"function_name\">fix_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fija la pieza actual en la matriz</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><statement name=\"DO0\"><block type=\"pxt_controls_for\"><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica que current_piece no sea null</comment><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"lists_index_set\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value></block></value><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement></block></statement></block></statement></block></statement></block></statement></block></xml>","main.ts":"","README.md":"","main.py":"","pxt.json":"{\n    \"name\": \"Moreno N 02\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"neopixel\": \"github:microsoft/pxt-neopixel#v0.7.6\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1731413765643,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</variable><variable id=\"_K0%8orwx:chD*h`JBAU\">y2</variable><variable id=\"nvyYORrYmP50G|Zl|t(k\">x2</variable><variable id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</variable><variable id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</variable><variable id=\"8@L.uSg|)em|v,nLG21a\">x3</variable><variable id=\"d%gx,XfAl,tF*a9~M+ti\">colors</variable><variable id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</variable><variable id=\"5A+-xu$jd{roy#b#Gc*L\">keys</variable><variable id=\"7u{NfeGykk.J=`/e0(7[\">current_position</variable><variable id=\"Ur%nG5OmwXFnzD=Oe2?x\">list</variable><variable id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</variable><variable id=\"Q{E[8P:J;/d*0#SVU!13\">y4</variable><variable id=\"0CxYrH5}BTT)}558qL-=\">x4</variable><variable id=\"}5l}[dPvlahNpt7o=@I:\">y5</variable><variable id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</variable><variable id=\"?iH;Rs=kCUO:vfDcK3`=\">row</variable></variables><block type=\"function_definition\" x=\"1244\" y=\"-103\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><field name=\"function_name\">draw_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Dibuja la pieza actual en la posición especificada</comment><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><comment pinned=\"false\" h=\"80\" w=\"160\">Utiliza una cadena vacía si es null</comment><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Q,MCm9!jNrjeI{^:-^a\">y3</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8@L.uSg|)em|v,nLG21a\">x3</field></block></value></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.Red</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"d%gx,XfAl,tF*a9~M+ti\">colors</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let current_piece: string | null = null\" numlines=\"1\" declaredvars=\"current_piece\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"neopixel_create\"><field name=\"pin\">DigitalPin.P0</field><field name=\"mode\">NeoPixelMode.RGB</field><value name=\"numleds\"><shadow type=\"math_number\"><field name=\"NUM\">64</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let tetriminos: { [key: string]: number[][] } = {\" line1=\"    I: [[1, 1, 1, 1]],\" line2=\"    O: [[1, 1], [1, 1]],\" line3=\"    T: [[0, 1, 0], [1, 1, 1]],\" line4=\"    L: [[1, 0], [1, 0], [1, 1]],\" line5=\"    Z: [[1, 1, 0], [0, 1, 1]]\" line6=\"}\" numlines=\"7\" declaredvars=\"tetriminos\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let colors: { [key: string]: number } = {\" line1=\"    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié &quot;Cyan&quot; por &quot;Blue&quot;\" line2=\"    O: neopixel.colors(NeoPixelColors.Yellow),\" line3=\"    T: neopixel.colors(NeoPixelColors.Purple),\" line4=\"    L: neopixel.colors(NeoPixelColors.Orange),\" line5=\"    Z: neopixel.colors(NeoPixelColors.Red)\" line6=\"}\" numlines=\"7\" declaredvars=\"colors\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Inicializa la matriz vacía (8x8)</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">8</field></shadow></value><statement name=\"DO\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"?iH;Rs=kCUO:vfDcK3`=\">row</field></block></value></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Inicia el juego</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"logic_operation\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"783\" y=\"0\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"EXPRESSION\">\"\"</field></block></value></block><block type=\"function_definition\" x=\"3310\" y=\"-106\"><mutation name=\"can_move\" functionid=\"=GPvIXR4FOk_Sh@w[{bg\"><arg name=\"piece\" id=\"2cd52k27be0eab4fspo7up\" type=\"Array\"></arg><arg name=\"position\" id=\"2y95toicw2mjryxpq9b6\" type=\"Array\"></arg></mutation><field name=\"function_name\">can_move</field><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica si la pieza puede moverse a una nueva posición</comment><value name=\"2cd52k27be0eab4fspo7up\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">piece</field></block></value><value name=\"2y95toicw2mjryxpq9b6\"><block type=\"argument_reporter_array\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">position</field></block></value><statement name=\"STACK\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">piece</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Q{E[8P:J;/d*0#SVU!13\">y4</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"argument_reporter_array\"><field name=\"VALUE\">position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"0CxYrH5}BTT)}558qL-=\">x4</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></next></block></statement></block></statement></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1149\"><mutation name=\"update_screen\" functionid=\"pCOZs/Tdv(b)S$*9:1F[\"></mutation><field name=\"function_name\">update_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Actualiza la pantalla con la matriz del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">7</field></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"neopixel_set_pixel_color\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><value name=\"pixeloffset\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_K0%8orwx:chD*h`JBAU\">y2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">8</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"nvyYORrYmP50G|Zl|t(k\">x2</field></block></value></block></value><value name=\"rgb\"><shadow type=\"neopixel_colors\"><field name=\"color\">NeoPixelColors.White</field></shadow></value></block></statement></block></statement></block></statement><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1150\" y=\"1149\"><mutation name=\"game_loop\" functionid=\"AKAUf(G}K7iv,4H=+a4$\"></mutation><field name=\"function_name\">game_loop</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función principal del juego</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"basic.forever(function () {\" line1=\"        if (input.buttonIsPressed(Button.A)) {\" line2=\"            // Mueve la pieza a la izquierda\" line3=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] - 1])) {\" line4=\"                current_position[1] -= 1\" line5=\"            }\" line6=\"        }\" line7=\"        if (input.buttonIsPressed(Button.B)) {\" line8=\"            // Mueve la pieza a la derecha\" line9=\"            if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0], current_position[1] + 1])) {\" line10=\"                current_position[1] += 1\" line11=\"            }\" line12=\"        }\" line13=\"\" line14=\"        // Mueve la pieza hacia abajo automáticamente\" line15=\"        if (can_move(tetriminos[current_piece || &quot;&quot;] || [], [current_position[0] + 1, current_position[1]])) {\" line16=\"            move_down()\" line17=\"        } else {\" line18=\"            fix_piece()  // Fija la pieza cuando no puede bajar más\" line19=\"            generate_new_piece()  // Genera una nueva pieza\" line20=\"        }\" line21=\"\" line22=\"        update_screen()\" line23=\"        draw_piece(tetriminos[current_piece || &quot;&quot;] || [], current_position)\" line24=\"        basic.pause(500)  // Controla la velocidad de caída\" line25=\"    })\" numlines=\"26\"></mutation></block></next></block></statement></block><block type=\"function_definition\" x=\"3480\" y=\"1149\"><mutation name=\"clear_screen\" functionid=\"z6s|.F3*CEYh83Z8wn?h\"></mutation><field name=\"function_name\">clear_screen</field><comment pinned=\"false\" h=\"80\" w=\"160\">Función para limpiar la pantalla</comment><statement name=\"STACK\"><block type=\"neopixel_clear\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value><next><block type=\"neopixel_show\"><value name=\"strip\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Iv6AmN0zC!Z}K;ol=#:4\">np</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"2333\" y=\"1223\"><mutation name=\"generate_new_piece\" functionid=\")itlE[p1syx_Kl4)NE$n\"></mutation><field name=\"function_name\">generate_new_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Genera una nueva pieza aleatoria</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let keys = Object.keys(tetriminos)\" numlines=\"1\" declaredvars=\"keys\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random_deprecated\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5A+-xu$jd{roy#b#Gc*L\">keys</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><next><block type=\"function_call\"><mutation name=\"draw_piece\" functionid=\"1FVpitQH{tapQ2jzY,j.\"><arg name=\"piece\" id=\"vcyz4wacd4ha47spvvr03\" type=\"Array\"></arg><arg name=\"position\" id=\"n0b59qzadfncsv2ig101j\" type=\"Array\"></arg></mutation><value name=\"vcyz4wacd4ha47spvvr03\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"n0b59qzadfncsv2ig101j\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3802\" y=\"1149\"><mutation name=\"move_down\" functionid=\"VoyC|Bf.BZsEklg-A_F0\"></mutation><field name=\"function_name\">move_down</field><comment pinned=\"false\" h=\"80\" w=\"160\">Mueve la pieza hacia abajo</comment><statement name=\"STACK\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"current_position[0] += 1\" numlines=\"1\"></mutation></block></statement></block><block type=\"function_definition\" x=\"4097\" y=\"1149\"><mutation name=\"fix_piece\" functionid=\"j_f/~n$=!bkh8b:D)}Q*\"></mutation><field name=\"function_name\">fix_piece</field><comment pinned=\"false\" h=\"80\" w=\"160\">Fija la pieza actual en la matriz</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value><statement name=\"DO0\"><block type=\"pxt_controls_for\"><comment pinned=\"false\" h=\"80\" w=\"160\">Verifica que current_piece no sea null</comment><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Z12T-e;Nq6RSHC5X*7K.\">tetriminos</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X@a^-=(P|,.gVF$a5_*r\">current_piece</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"lists_index_set\"><value name=\"LIST\"><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=MqJ3:ebcyf~+W{k%tpr\">matrix</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}5l}[dPvlahNpt7o=@I:\">y5</field></block></value></block></value></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"7u{NfeGykk.J=`/e0(7[\">current_position</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Rk@mZSP{ZTPB$6h3PvOQ\">x5</field></block></value></block></value><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement></block></statement></block></statement></block></statement></block></statement></block></xml>","main.ts":"// Verifica si la pieza puede moverse a una nueva posición\nfunction can_move (piece: any[], position: number[]) {\n    for (let y4 = 0; y4 <= piece.length - 1; y4++) {\n        for (let x4 = 0; x4 <= piece[y4].length - 1; x4++) {\n            if (piece[y4][x4] == 1) {\n                if (position[0] + y4 >= 8 || position[1] + x4 >= 8 || position[1] + x4 < 0) {\n                    return false\n                }\n                if (matrix[position[0] + y4][position[1] + x4] == 1) {\n                    return false\n                }\n            }\n        }\n    }\n    return true\n}\n// Fija la pieza actual en la matriz\nfunction fix_piece () {\n    if (current_piece) {\n        // Verifica que current_piece no sea null\n        for (let y5 = 0; y5 <= tetriminos[current_piece].length - 1; y5++) {\n            for (let x5 = 0; x5 <= tetriminos[current_piece][y5].length - 1; x5++) {\n                if (tetriminos[current_piece][y5][x5] == 1) {\n                    matrix[current_position[0] + y5][current_position[1] + x5] = 1\n                }\n            }\n        }\n    }\n}\n// Actualiza la pantalla con la matriz del juego\nfunction update_screen () {\n    clear_screen()\n    for (let y2 = 0; y2 <= 7; y2++) {\n        for (let x2 = 0; x2 <= 7; x2++) {\n            if (matrix[y2][x2] == 1) {\n                np.setPixelColor(y2 * 8 + x2, neopixel.colors(NeoPixelColors.White))\n            }\n        }\n    }\n    np.show()\n}\n// Función principal del juego\nfunction game_loop () {\n    generate_new_piece()\n    basic.forever(function () {\n        if (input.buttonIsPressed(Button.A)) {\n            // Mueve la pieza a la izquierda\n            if (can_move(tetriminos[current_piece || \"\"] || [], [current_position[0], current_position[1] - 1])) {\n                current_position[1] -= 1\n            }\n        }\n        if (input.buttonIsPressed(Button.B)) {\n            // Mueve la pieza a la derecha\n            if (can_move(tetriminos[current_piece || \"\"] || [], [current_position[0], current_position[1] + 1])) {\n                current_position[1] += 1\n            }\n        }\n\n        // Mueve la pieza hacia abajo automáticamente\n        if (can_move(tetriminos[current_piece || \"\"] || [], [current_position[0] + 1, current_position[1]])) {\n            move_down()\n        } else {\n            fix_piece()  // Fija la pieza cuando no puede bajar más\n            generate_new_piece()  // Genera una nueva pieza\n        }\n\n        update_screen()\n        draw_piece(tetriminos[current_piece || \"\"] || [], current_position)\n        basic.pause(500)  // Controla la velocidad de caída\n    })\n}\n// Dibuja la pieza actual en la posición especificada\nfunction draw_piece (piece: any[], position: number[]) {\n    for (let y3 = 0; y3 <= piece.length - 1; y3++) {\n        for (let x3 = 0; x3 <= piece[y3].length - 1; x3++) {\n            if (piece[y3][x3] == 1) {\n                // Utiliza una cadena vacía si es null\n                np.setPixelColor((position[0] + y3) * 8 + (position[1] + x3), colors[0])\n            }\n        }\n    }\n    np.show()\n}\n// Mueve la pieza hacia abajo\nfunction move_down () {\n    current_position[0] += 1\n}\n// Función para limpiar la pantalla\nfunction clear_screen () {\n    np.clear()\n    np.show()\n}\n// Genera una nueva pieza aleatoria\nfunction generate_new_piece () {\n    let keys = Object.keys(tetriminos)\ncurrent_piece = keys[Math.randomRange(0, keys.length - 1)]\n    current_position = [0, 3]\n    draw_piece(tetriminos[current_piece], current_position)\n}\nlet matrix: number[][] = []\nlet current_position: number[] = []\nlet np: neopixel.Strip = null\nlet current_piece: string | null = null\nnp = neopixel.create(DigitalPin.P0, 64, NeoPixelMode.RGB)\nlet tetriminos: { [key: string]: number[][] } = {\n    I: [[1, 1, 1, 1]],\n    O: [[1, 1], [1, 1]],\n    T: [[0, 1, 0], [1, 1, 1]],\n    L: [[1, 0], [1, 0], [1, 1]],\n    Z: [[1, 1, 0], [0, 1, 1]]\n}\nlet colors: { [key: string]: number } = {\n    I: neopixel.colors(NeoPixelColors.Blue),  // Cambié \"Cyan\" por \"Blue\"\n    O: neopixel.colors(NeoPixelColors.Yellow),\n    T: neopixel.colors(NeoPixelColors.Purple),\n    L: neopixel.colors(NeoPixelColors.Orange),\n    Z: neopixel.colors(NeoPixelColors.Red)\n}\ncurrent_position = [0, 0]\n// Inicializa la matriz vacía (8x8)\nfor (let index = 0; index < 8; index++) {\n    let row: number[] = []\n    for (let index = 0; index < 8; index++) {\n        row.push(0)\n    }\n    matrix.push(row)\n}\n// Inicia el juego\ngame_loop()\n","README.md":"","main.py":"","pxt.json":"{\n    \"name\": \"Moreno N 02\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"neopixel\": \"github:microsoft/pxt-neopixel#v0.7.6\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[{"id":"95844-66557-82668-15669","timestamp":1728947264885}],"lastSaveTime":1731414992008}